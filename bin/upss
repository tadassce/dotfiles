#!/bin/bash

# Uploads last taken screenshot to S3
# and copies the URL to clipboard

# This is supposed to export AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
# and optionally AWS_DEFAULT_REGION
source ~/.env-s3

path=$(ls -t ~/.icloud/Screenshots/Screen\ Shot* | head -n 1)
name=${path##*/}
host='i.sce.lt'
url=$(echo "http://$host/$name" | tr ' ' '+')

/usr/local/bin/s3cmd -q put "$path" s3://$host

echo -n $url | pbcopy
