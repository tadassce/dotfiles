#!/bin/bash

# Install script for a fresh OS X install.
# More meant for copy-pasting rather than just running so far.

# - Install 1P and XCode from the MAS

xcode-select --install

# Install Homebrew
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

brew install vim git zsh tmux chruby ruby-install ctags \
  reattach-to-user-namespace the_silver_searcher mysql redis mongodb wget \
  heroku-toolbelt jrnl fpp htop

# Set up dotfiles
brew tap thoughtbot/formulae
brew install rcm
git clone https://github.com/tadassce/dotfiles.git ~/.dotfiles
rcup

# Homebrew Cask
brew install caskroom/cask/brew-cask
export HOMEBREW_CASK_OPTS="--appdir=/Applications"
brew cask install dropbox alfred
brew cask alfred link

# Set the default shell (and in Users' prefs)
chsh -s /usr/local/bin/zsh

# Vim Plugins
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
# :PlugInstall

# Tmux Plugin Manager
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Set some OS X defaults
defaults write com.apple.Dock autohide-delay -float 0
killall Dock
defaults write com.apple.screencapture disable-shadow -bool true
killall SystemUIServer
defaults write com.apple.screencapture location ~/Dropbox/Screenshots
killall SystemUIServer

ruby-install ruby --latest

gem install pry pry-doc reek rubocop ruby-lint coderay git-up

# Fix zsh env
sudo mv /etc/zshenv /etc/zprofile

# Bring back brew-services
brew tap gapple/services

# Install Pow
curl get.pow.cx | sh

# Some useful Quick Look plugins
brew cask install qlcolorcode qlstephen qlmarkdown quicklook-json \
  quicklook-csv qlimagesize
